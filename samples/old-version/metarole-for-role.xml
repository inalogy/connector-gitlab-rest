<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
      xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      oid="8c177712-cdd5-4ab1-a89c-0e957951dae2">
    <name>Metarole for Role</name>
    <inducement>
        <targetRef xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
                   relation="org:default"
                   type="c:OrgType">
            <filter>
                <q:inOid>
                    <expression>
                        <returnMultiplicity>multi</returnMultiplicity>
                        <script>
                            <code>
                                return focusAssignment?.getOrgRef()?.getOid()
                            </code>
                        </script>
                    </expression>
                </q:inOid>
            </filter>
        </targetRef>
        <order>2</order>
        <focusType>UserType</focusType>
    </inducement>
    <inducement>
        <targetRef xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
                   relation="org:manager"
                   type="c:OrgType">
            <filter>
                <q:inOid>
                    <expression>
                        <returnMultiplicity>multi</returnMultiplicity>
                        <script>
                            <code>
                                return focusAssignment?.getOrgRef()?.getOid()
                            </code>
                        </script>
                    </expression>
                </q:inOid>
            </filter>
        </targetRef>
        <order>2</order>
        <focusType>UserType</focusType>
        <condition>
            <expression>
                <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        xsi:type="c:ScriptExpressionEvaluatorType">
                    <code>
                        return (immediateRole?.getName()?.getOrig()?.equals('owner') || immediateRole?.getName()?.getOrig()?.equals('master'))
                    </code>
                </script>
            </expression>
        </condition>
    </inducement>
</role>
